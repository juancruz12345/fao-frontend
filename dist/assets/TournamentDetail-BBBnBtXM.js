import{a6 as C,u as v,a7 as w,V as T,r as E,j as s,U as P,C as B,M as I,Q as A,O as F,a8 as L,T as M}from"./index-BHeBwaQY.js";import{R,C as p}from"./Row-cu-65cpA.js";import{C as r}from"./Card-CpCgghwF.js";import{A as d}from"./Accordion-CzCa6OGW.js";import{B as _}from"./Badge-CnctFRQV.js";import{T as k}from"./Table-BprD6uSp.js";function U(){var x,m;const{id:c}=C(),{players:g}=v(),y=new Map(g.map(e=>[e.id,e.name])),t=e=>y.get(e)||"Unknown Player",N=w(),{tournaments:f}=N.state||{},a=f.find(e=>e.id===Number.parseInt(c)),{data:i=[],isLoading:b,isError:o}=T({queryKey:["standings",c],queryFn:async()=>{console.log("Fetching tournament matches from API...");const e=await fetch(`https://fao-backend.onrender.com/tournament/${c}/standings`);if(!e.ok)throw new Error("Error al cargar la página");return await e.json()},staleTime:1e3*60*20,cacheTime:1e3*60*30,refetchOnWindowFocus:!1});return E.useEffect(()=>{},[c,i]),o?s.jsxs(P,{children:["Error: ",o]}):s.jsx("div",{children:s.jsx("div",{children:a!==void 0?s.jsx(B,{className:"tournament-detail-container",children:s.jsxs(R,{className:"justify-content-center",children:[s.jsxs(p,{xs:12,lg:8,children:[s.jsxs(r,{className:"tournament-detail-card mb-4",children:[s.jsx(r.Header,{children:s.jsx("h2",{className:"mb-0",children:a==null?void 0:a.name})}),s.jsxs(r.Body,{children:[s.jsxs(r.Text,{children:[s.jsx(I,{className:"me-2"}),s.jsxs("strong",{children:["Lugar: ",a==null?void 0:a.location]})," "]}),s.jsxs(r.Text,{children:[s.jsx(A,{className:"me-2"}),s.jsxs("strong",{children:["Fecha de inicio: ",a==null?void 0:a.start_date]})," "]})]})]}),s.jsx(d,{className:"rounds-accordion mb-4",children:((x=a==null?void 0:a.rounds)==null?void 0:x.length)>0&&((m=a.rounds)==null?void 0:m.map((e,l)=>{var h,j;return s.jsxs(d.Item,{className:"rounds-item",eventKey:l.toString(),children:[s.jsx(d.Header,{className:"rounds-header",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx(F,{className:"me-2"}),"Ronda ",e==null?void 0:e.number]})}),s.jsx(d.Body,{children:((h=e==null?void 0:e.matches)==null?void 0:h.length)>0&&((j=e==null?void 0:e.matches)==null?void 0:j.map((n,u)=>s.jsx(r,{className:"match-card mb-2",children:s.jsx(r.Body,{children:s.jsxs("div",{className:"players-container",children:[s.jsx("span",{className:"player-name",children:t(n==null?void 0:n.player1_id)}),s.jsx(_,{bg:"secondary",className:"result-badge",children:n==null?void 0:n.result}),s.jsx("span",{className:"player-name",children:t(n==null?void 0:n.player2_id)})]})})},u)))})]},e==null?void 0:e.number)}))})]}),s.jsx(p,{xs:12,lg:4,children:b?s.jsxs("div",{className:"div-spinner",children:[s.jsx(L,{}),s.jsx("p",{children:"Cargando clasificación"})]}):s.jsxs(r,{className:"standings-card",children:[s.jsx(r.Header,{children:s.jsx("h3",{className:"mb-0",children:"Clasificación"})}),s.jsx(r.Body,{children:s.jsxs(k,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"standings-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Jugador"}),s.jsx("th",{children:"Puntos"})]})}),s.jsx("tbody",{children:(i==null?void 0:i.length)>0&&(i==null?void 0:i.map((e,l)=>s.jsxs("tr",{children:[s.jsx("td",{children:e.player_name}),s.jsx("td",{children:e.points})]},l)))})]})})]})})]})}):s.jsx(M,{msg:"Cargando torneo"})})})}export{U as default};
