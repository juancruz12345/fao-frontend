import{r as C,y as w,j as s,z as I,a6 as T,u as P,a7 as R,V as L,U as $,C as _,M as A,Q as F,O as M,T as H}from"./index-BbZCtNl_.js";import{R as K,C as u}from"./Row-DRDpz7pi.js";import{C as r}from"./Card-SXcs_QJS.js";import{A as x}from"./Accordion-CAZQSo0y.js";import{B as k}from"./Badge-CADgTtws.js";import{T as q}from"./Table-Cpi5hgaX.js";const v=C.forwardRef(({bsPrefix:c,variant:l,animation:h="border",size:d,as:o="div",className:j,...p},a)=>{c=w(c,"spinner");const i=`${c}-${h}`;return s.jsx(o,{ref:a,...p,className:I(j,i,d&&`${i}-${d}`,l&&`text-${l}`)})});v.displayName="Spinner";function V(){var N,f;const{id:c}=T(),{players:l}=P(),h=l==null?void 0:l.filter(e=>(e==null?void 0:e.name)!=="LIBRE"),d=new Map(h.map(e=>[e.id,e.name])),o=e=>d.get(e)||"-",j=R(),{tournaments:p}=j.state||{},a=p.find(e=>e.id===Number.parseInt(c)),{data:i=[],isLoading:B,isError:g}=L({queryKey:["standings",c],queryFn:async()=>{console.log("Fetching tournament matches from API...");const e=await fetch(`https://fao-backend.onrender.com/tournament/${c}/standings`);if(!e.ok)throw new Error("Error al cargar la página");return await e.json()},staleTime:1e3*60*20,cacheTime:1e3*60*30,refetchOnWindowFocus:!1}),t=i==null?void 0:i.filter(e=>(e==null?void 0:e.player_name)!=="LIBRE");return C.useEffect(()=>{console.log(i)},[c,i]),g?s.jsxs($,{children:["Error: ",g]}):s.jsx("div",{children:s.jsx("div",{children:a!==void 0?s.jsx(_,{className:"tournament-detail-container",children:s.jsxs(K,{className:"justify-content-center",children:[s.jsxs(u,{xs:12,lg:8,children:[s.jsxs(r,{className:"tournament-detail-card mb-4",children:[s.jsx(r.Header,{children:s.jsx("h2",{className:"mb-0",children:a==null?void 0:a.name})}),s.jsxs(r.Body,{children:[s.jsxs(r.Text,{children:[s.jsx(A,{className:"me-2"}),s.jsxs("strong",{children:["Lugar: ",a==null?void 0:a.location]})," "]}),s.jsxs(r.Text,{children:[s.jsx(F,{className:"me-2"}),s.jsxs("strong",{children:["Fecha de inicio: ",a==null?void 0:a.start_date]})," "]})]})]}),s.jsx(x,{className:"rounds-accordion mb-4",children:((N=a==null?void 0:a.rounds)==null?void 0:N.length)>0&&((f=a.rounds)==null?void 0:f.map((e,m)=>{var y,b;return s.jsxs(x.Item,{className:"rounds-item",eventKey:m.toString(),children:[s.jsx(x.Header,{className:"rounds-header",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx(M,{className:"me-2"}),"Ronda ",e==null?void 0:e.number]})}),s.jsx(x.Body,{children:((y=e==null?void 0:e.matches)==null?void 0:y.length)>0&&((b=e==null?void 0:e.matches)==null?void 0:b.map((n,E)=>s.jsx(r,{className:"match-card mb-2",children:s.jsx(r.Body,{children:s.jsxs("div",{className:"players-container",children:[s.jsx("span",{className:"player-name",children:o(n==null?void 0:n.player1_id)}),s.jsx(k,{bg:"secondary",className:"result-badge",children:n==null?void 0:n.result}),s.jsx("span",{className:"player-name",children:o(n==null?void 0:n.player2_id)})]})})},E)))})]},e==null?void 0:e.number)}))})]}),s.jsx(u,{xs:12,lg:4,children:B?s.jsxs("div",{className:"div-spinner",children:[s.jsx(v,{}),s.jsx("p",{children:"Cargando clasificación"})]}):s.jsxs(r,{className:"standings-card",children:[s.jsx(r.Header,{children:s.jsx("h3",{className:"mb-0",children:"Clasificación"})}),s.jsx(r.Body,{children:s.jsxs(q,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"standings-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Jugador"}),s.jsx("th",{children:"Puntos"})]})}),s.jsx("tbody",{children:(t==null?void 0:t.length)>0&&(t==null?void 0:t.map((e,m)=>s.jsxs("tr",{children:[s.jsx("td",{children:e.player_name}),s.jsx("td",{children:e.points})]},m)))})]})})]})})]})}):s.jsx(H,{msg:"Cargando torneo"})})})}export{V as default};
