import{r as t,M as h,j as r,O as x,C as l,Q as j,l as g,b as u}from"./index-BKcmjB81.js";import{C as n}from"./Card-Kh-DD9Gn.js";import{R as f,C as m}from"./Row-CY8um4bv.js";const d=t.createContext();function p({children:s}){const{data:a=[],isLoading:o,isError:e}=h({queryKey:["broadcasts"],queryFn:async()=>{console.log("Fetching tournaments from API...");const i=await fetch("https://lichess.org/api/broadcast/by/FAOenvivo");if(!i.ok)throw new Error("Error al cargar la pÃ¡gina");const c=(await i.json()).currentPageResults;return console.log(c),c},staleTime:12e5,cacheTime:18e5,refetchOnWindowFocus:!1});return o?r.jsx(x,{msg:"Cargando torneos"}):e?r.jsx(l,{className:"py-5",children:r.jsxs(j,{variant:"danger",children:["Error: ",e]})}):r.jsx(d.Provider,{value:{broadcasts:a},children:s})}function T(){return t.useContext(d)}function y({tournament:s}){var a,o,e;return r.jsxs(n,{className:"tournament-card h-100 shadow-sm",children:[r.jsx(n.Header,{className:"tournament-card-header",children:r.jsxs(n.Title,{children:[r.jsx(g,{className:"icon-trophy"}),s==null?void 0:s.name]})}),r.jsx(n.Body,{children:r.jsxs(n.Text,{children:[r.jsx("strong",{children:"Lugar:"})," ",(a=s==null?void 0:s.info)==null?void 0:a.location,r.jsx("strong",{children:"Formato:"})," ",(o=s==null?void 0:s.info)==null?void 0:o.format,r.jsx("strong",{children:"Cant. Rondas:"})," ",(e=s==null?void 0:s.rounds)==null?void 0:e.length]})}),r.jsxs(n.Footer,{children:[r.jsx("strong",{children:"Fecha de inicio:"})," ",new Date(s==null?void 0:s.dates[0]).toLocaleDateString()]})]})}function C(){const{broadcasts:s}=T(),a=u(),o=e=>{a(`/torneo/${e}`,{state:{broadcasts:s}})};return r.jsxs(l,{fluid:!0,className:"tournaments-container",children:[r.jsx("h1",{className:"text-center my-4",children:"Torneos"}),r.jsx(f,{xs:1,md:2,lg:3,className:"g-4",children:Array.isArray(s)&&(s==null?void 0:s.map(e=>r.jsx(m,{children:r.jsx("div",{className:"tournaments-div",onClick:()=>{o(e.tour.id)},children:r.jsx(y,{tournament:e.tour})})},e.tour.id)))})]})}function E(){return r.jsx(p,{children:r.jsx(C,{})})}export{C as TournamentsContent,E as default};
